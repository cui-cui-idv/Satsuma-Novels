<%- include('partials/header') %>
<div class="auth-container">
    <div class="auth-form-wrapper" id="message-wrapper" style="text-align: center;">
        <h2 id="message-title">メールアドレスを確認中...</h2>
        <p id="message-body" style="color: var(--font-secondary);"></p>
        <div id="link-area"></div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const actionCode = urlParams.get('oobCode');
    const titleEl = document.getElementById('message-title');
    const bodyEl = document.getElementById('message-body');
    const linkEl = document.getElementById('link-area');

    firebase.auth().applyActionCode(actionCode)
        .then(() => {
            titleEl.textContent = '認証が完了しました！';
            bodyEl.textContent = 'ご登録ありがとうございます。全ての機能がご利用いただけます。';
            linkEl.innerHTML = `<a href="/profile" class="btn btn-primary" style="margin-top: 2rem;">プロフィールへ</a>`;
        })
        .catch((error) => {
            console.error(error);
            titleEl.textContent = '認証エラー';
            bodyEl.textContent = 'このリンクは無効か、または有効期限が切れています。';
            linkEl.innerHTML = `<a href="/" class="btn btn-secondary" style="margin-top: 2rem;">トップページへ</a>`;
        });
});
</script>
<%- include('partials/footer') %>